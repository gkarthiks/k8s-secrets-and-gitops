apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: secrets-demo.kubecon-eu.info
webhooks:
  - name: secrets-demo.kubecon-eu.info
    failurePolicy: Fail
    timeoutSeconds: 5
    sideEffects: None
    admissionReviewVersions: ["v1"]
    rules:
      - apiGroups:   [""]
        apiVersions: ["v1"]
        operations:  ["CREATE", "UPDATE"]
        resources:   ["secrets"]
        scope:       "Namespaced"
    clientConfig:
      url: "https://localhost:8083/secrets"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMzakNDQWNhZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFnTVI0d0hBWURWUVFEREJVd0xqQXUKTUM0d0xXTmhRREUxT0RFME5qWXlOVFl3SGhjTk1qQXdNakV4TWpNeE1EVTJXaGNOTWpFd01qRXdNak14TURVMgpXakFnTVI0d0hBWURWUVFEREJVd0xqQXVNQzR3TFdOaFFERTFPREUwTmpZeU5UWXdnZ0VpTUEwR0NTcUdTSWIzCkRRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRRE5MZkhFMXNpZzVoODJNQnZLbEsreWhCRWZkS2RCTUQ5QnJCY1EKenYxNlM4K2pmdUd5TjBUaFJsVGo1NlAzYjFRUzVrVXVNanRGSVZMaEYvNjRXeTAvbjFKVlRQc2dIbjY5T2JYbwpGT2dkSFVVNTVhYUZmL2Z5QzVHdEQrTnptdjhLR0UzTHJ2VTJIVzdjSnlXWlk3WVFJZTVFaXhBR1VJQVpJek1SCi9VdTNuN1V0aXdkY0dEUmFFTFM2VThjdTFzenhYVW84SWJub0tqTyt1aytvRi9lMGQvajJQSzA2d3B1MWFhbUcKbkxDVGwxTHVTTzZDUUZ5cU5xUldJaFZEbTJKSFRIb1NZNTlqN2d3Qmp0ZnlONnhVRlF0UkxpbDU2dEU0bDBZNgpmenJkL3YvSFdTdzRnSmtiL1Q0SlZOSVQrd2JqSmpNdFl1WlBHWVB3dVozUDBEQkZBZ01CQUFHakl6QWhNQTRHCkExVWREd0VCL3dRRUF3SUNwREFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUIKQVFBeTRxRnRPbjRzZ1pWQTNxNHVsbVNaRzBZU25tMlJVMWVGdkRXNEZpSmtZODh6Yy96UmxpUjhBR3dTOHRkYwpPbmdEWWNJUEttNGdka3Y1N1lpQk9SbHdjK2k2dEdpZnN4N0htcllDSFJqSlhDZVZyczBHTEtyUThzZENSWmNzCkdIRm9pcUQ2bjl0WmFmZXI3TWtOWmswY1RMQXhXcTlzeDJHUWlES3cvOFFJTkkzN0RXbzRuTWJkYjJYb0ZEbGoKOURmVklJUWNCbXpRaUhPcWdydWhHa3gwRGF1aVd6UHV2OURvZXBIa2l6M3VYRGlMQmxHc0JPbm9zMTVsdE9IaApwbzk4RDh1eHUwck0vSStGcnZha1k4ZmYwRllTd3V2U2lrei8ya1JOZS9vNEZoUnMvWTFIdStFdEQ3VVNaODJICmQ4K2hST1AyUldGRUFkd0ZlVDlEVDZSOQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==